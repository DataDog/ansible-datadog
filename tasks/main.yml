---

- name: Check if OS is supported
  include_tasks: os-check.yml

- name: Set Facts for Datadog Agent Major Version
  include_tasks: set-parse-version.yml

- name: Package Install Tasks
  include_tasks: "pkg-{{ ansible_os_family }}.yml"

- name: Configure Agent
  include_tasks: "{{ datadog_agent_family }}-{{ ansible_system }}.yml"

- name: Integrations Tasks
  include_tasks: integration.yml
  when: datadog_integration is defined

- name: Post Tasks
  include_tasks: post_tasks/*.yml
  when: post_tasks is defined

- name: Pre Tasks
  include_tasks: pre_tasks/*.yml
  when: pre_tasks is defined
